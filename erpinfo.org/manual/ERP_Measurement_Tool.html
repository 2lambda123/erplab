<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>ERP Measurement Tool</title>
<style type="text/css">
<!--
p.paragraph {
margin-top:0in;
margin-right:0in;
margin-bottom:8.0pt;
margin-left:0in;
font-size:11.0pt;
font-family:Cambria;
}
-->
</style>
<style type="text/css">
<!--
p.Note {
margin-top:0in;
margin-right:0in;
margin-bottom:8.0pt;
margin-left:0in;
font-size:11.0pt;
font-family:Cambria;
font-style:italic;
}
-->
</style>
<style type="text/css">
<!--
p.LiteralText {
margin:0in;
margin-bottom:.0001pt;
font-size:10.0pt;
font-family:Helvetica;
}
.tablesl {
	font-family: Arial, Helvetica, sans-serif;
}
.tablesl {
	font-size: 12px;
}
-->
</style>
<style type="text/css">
<!--
p.CommandWindowText {
margin:0in;
margin-bottom:.0001pt;
text-align:justify;
font-size:9.0pt;
font-family:Courier;
}
p.MsoNormal {
margin:0in;
margin-bottom:.0001pt;
font-size:12.0pt;
font-family:Cambria;
}
-->
</style>
</head>

<body>
<p class="paragraph"><strong>ERPLAB &gt; ERP Measurement Tool </strong>is used to measure features of the ERP waveforms, such as amplitudes and latencies. </p>
<p class="paragraph">The basic idea behind this tool is that you specify a set of ERPsets, a set of bins, a set of channels, and a specific measurement to be performed (e.g., peak latency between 300 and 600 ms), and then the tool performs all of the measurements and saves them in a text file.  You can either specify ERPsets that have been loaded into ERPLAB (and are therefore visible in the <strong>ERPsets</strong> menu) or ERPsets that have been stored in files on disk.  To make it easy to repeatedly measure the same set of files, you can save a list of the files and then load it again later.  The GUI is shown in the screenshot below.</p>
<p class="paragraph"><img src="images/manual_ERP measurement tool.png" width="828" height="539" /></p>
<p class="paragraph">The measurement tool includes a <strong>Viewer</strong> button near the bottom. This allows you to view each waveform along with measurement information. We strongly encourage you to look at all your measurements to make sure that everything is OK. You may be surprised at the degree of subject-to-subject variability in the waveforms. Here's what it looks like for peak amplitude measurements with the parameters shown in the screenshot above.</p>
<p class="paragraph"><img src="images/measurement_viewer.jpg" alt="measurement_viewer" width="931" height="581" /></p>
<p class="paragraph">The usual approach should be to set the measurement parameters (e.g., latency window, files to measure, etc.) and then click the <strong>VIEWER</strong> button to see the measures. You can use the arrow buttons in the viewer to step through each combination of bins, channels, and files. When you have finished viewing the measures, you click the <strong>CLOSE</strong> button, which brings you back to the main measurement window. If you're satisfied with the parameters, you can click <strong>RUN</strong> to save the measures to a text file. You can then import this file into your favorite statistical analysis system.</p>
<p class="paragraph">When you save the measured values to a text file, you can choose between two different file formats (see details below). The two formats are:</p>
<ul>
  <li><strong class="paragraph"> One ERPset per line (wide format)</strong>. In this format, all the measurements for a single file (e.g., N bins x M channels) will be placed on a single line. That is, each line will be a subject (assuming that each file represents one subject's data) and each column will be the measurement for a bin/channel combination. This is the format required by many statistical software packages. In many experiments, the number of columns is very large, making it not very human-friendly.</li>
  <li><strong>One measurement per line (long format).</strong> In this format, a single measurement is provided on each line (e.g., a single combination of file, bin, and channel). Each line also contains informaiton about which file, bin, and channel was measured on that line. This is easily human readable, and it is also well suited for importing into Excel for use with pivot tables.</li>
</ul>
<p class="paragraph">For some technical details about how the time windows for measurement are specified, <a href="Timing_Details.html">click here</a>.</p>
<p class="paragraph">Several different types of values  can be measured:</p>
<p><strong>Instantaneous amplitude</strong></p>
<p class="paragraph">This simply measures the amplitude at one latency (a single latency is specified in the latency text box).</p>
<p><strong>Peak amplitude or latency</strong></p>
<p class="paragraph">This finds the most positive or most negative amplitude within a specified time range (the starting and ending latencies of the time range are specified in the <strong>latency</strong> text box).  The amplitude and/or latency of this peak is provided in the output file.  If the number of points for the <strong>local peak</strong> option is nonzero, a peak is defined as the most positive or most negative value that is also (a) larger than the voltages in the one sample on either side of the peak, and (b) larger than the average of the <strong>N</strong> sample points on left side of the peak, and (c) larger than the average of the <strong>N</strong> sample points on the right side of the peak (where <strong>N</strong> is the value you specify in the GUI).  If there is no point that meets this definition, then a warning message is printed in the command window and the simple peak (the most positive or negative point) or NaN is printed (depending on what is specified in the pull-down menu for <strong>If no local peak is found in a given waveform</strong>).  Note that this requires that the <strong>N</strong> sample points actually exist.  If, for example, you ask for the local peak amplitude between 300 and 900 ms, with <strong>N</strong> set at 10, then the epoch length must be at least 10 sample points longer than 900 ms.  Note: We strongly recommend that you use the local peak option; if you do, the Method section of your journal articles should indicate that you measured &quot;local peak amplitude&quot; or &quot;local peak latency&quot; (and not just &quot;peak amplitude&quot; and &quot;peak amplitude&quot;).<strong></strong></p>
<p><strong>Mean amplitude</strong></p>
<p class="paragraph">This computes mean voltage within a specified time range (the starting and ending latencies of the time range are specified in the <strong>latency</strong> text box). </p>
<p><strong>Integral and area amplitude</strong></p>
<p class="paragraph">ERPLAB provides several options for computing what is often called &quot;area amplitude,&quot; and to understand them you must first understand some terminology.  Technically, the term &quot;area&quot; refers to the geometric shapes created by the boundary of the waveform and the zero line.  Area can never be negative.  When you want to allow the regions below the zero line to be considered negative, such that positive and negative regions will cancel each other, you will be measuring the &quot;integral&quot; of the waveform (over some time range).  The area is equivalent to taking the absolute value of each point (i.e., &quot;rectifying&quot; the waveform) and then computing the integral.</p>
<p class="paragraph">When ERPLAB measures areas and integrals, it does so by treating each sample point as a rectangle that is one sample period wide and computing the area or integral numerically (as opposed to computing the values analytically by fitting a continuous function to the data).</p>
<p class="paragraph">The integral or area is measured between two fixed time points that you specify. You have 4 options for exactly what will be measured:</p>
<ul>
  <li><strong>Rectified area (negative values become positive)</strong>- This is the true area of the geometric regions formed by the combination of the baseline and the waveform. It is equivalent to taking the absolute value at each data point (i.e., <em>rectifying</em> the waveform) and then measuring the area. The resulting value is &gt;= zero.</li>
  <li><strong>Numeric integration (area for negatives subtracted from area for positives)</strong>- This is the integral of the waveform, which is equal to computing the sum of the voltages at each sample point in the measurement window and then scaling this sum to take the sampling rate into account.  The resulting value can be either positive or negative. Note that the integral is equivalent to the mean amplitude, except that the mean is divided by the length of the measurement interval.</li>
  <li><strong>Area for positive regions (negatives are zeroed)</strong>- This finds the area of the portions of the waveform that are above the zero line.  This is equivalent to setting all negative values to zero and computing the area. The resulting value is &gt;= zero.</li>
  <li><strong>Area for negative regions (positives are zeroed)</strong>- This finds the area of the portions of the waveform that are below the zero line.  This is equivalent to setting all positive values to zero, and computing the rectified area. The resulting value is &gt;= zero.</li>
</ul>
<p class="paragraph">Because area has a height (µV) and a width (seconds), the values from this routine are in units of µVs (microvolt seconds). That is, a 1 µV value over a 1 second period would have an area of 1.0 µVs, and a 1 µV value over a100-ms period would have an area of 0.1 µVs.</p>
<p class="paragraph"><strong>Fractional area latency</strong></p>
<p class="paragraph">This routine provides a measure of latency by finding the point that dividing the area under the curve into specific fractions.  For example, if you want to find the midpoint of a component, you could do this by finding the point that divides the area under the curve into two equal regions, as in the example below.  This would be the &quot;50% area latency&quot; measure, and it works extremely well on large components like the P3 wave or on components that have been isolated by means of difference waves (see, e.g., Kiesel et al., 2008, Psychophysiology; Luck &amp; Hillyard, 1990, Perception &amp; Psychophysics; Luck, 1998, Psychological Science).</p>
<p><img src="images/Fractional_Area_Latency.jpg" alt="Fractional_Area_Latency" width="548" height="110" /></p>
<p class="paragraph">The same approach can be used to assess the onset or offset of a waveform.  To estimate the onset, you could find something like the 15% area latency (the point at which 15% of the area is to the left of the point and 85% of the area is to the right).  To estimate the offset, you could find something like the 85% area latency.  The same four options that are available for using area/integral to measure amplitude are available for measuring fractional area amplitude.</p>
<p><strong>Fractional peak latency</strong></p>
<p class="paragraph">This routine provides a measure of onset latency by finding the peak amplitude and working backward in the waveform until the amplitude reaches a specified fraction of the peak amplitude.  For example, the figure below shows how the 50% peak latency is computed by finding the peak amplitude and then working backward until the voltage reaches 50% of this peak voltage.  As in other peak measures, you can have it find a local peak amplitude rather than the absolute peak, and work backward to the point that is the requested fraction of the local peak amplitude. In many cases, this is the optimal method for computing onset latency (see, e.g., Kiesel et al., 2008, Psychophysiology; Luck et al., 2009, Psychophysiology).</p>
<p class="paragraph"><img src="images/Fractional_Peak_Amplitude.jpg" alt="Fractional_Peak_Amplitude" width="550" height="213" /></p>
<p><strong>Saving the measurements</strong></p>
<p class="paragraph">The measured values are stored in a text file, which you can import into the statistical analysis package of your choice.  There are two output formats.  In the first (<strong>One ERPset per line (wide format)</strong>), each line contains the data from every requested bin and channel from a given ERPset.  Ordinarily, each ERPset will contain the data from one subject, so the result contains one line for each subject, as shown here:</p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">ERPset   Frequent_FZ   Frequent_CZ  Frequent _PZ  Rare_FZ     Rare_CZ   Rare_PZ       </span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S1       2.265          4.173        4.352         4.300      10.754     9.814 </span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S2       1.776          4.027        4.175         3.914      10.029     9.268 </span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S3       2.265          4.173        4.352         4.300      10.754     9.814 </span></p>
<p class="paragraph">In this example, peak amplitude was measured from two bins (&quot;Frequent&quot; and &quot;Rare&quot;) and three channels (Fz, Cz, and Pz).  The data from each subject (S1, S2, and S3) appears on a separate line, and each column represents the measurement from a particular channel in a particular bin.  This format is useful for most statistics programs, such as SPSS.</p>
<p class="paragraph">The second output format (<strong>One measurement per line (long format)</strong>) provides one measurement per line, along with various pieces of information that can be used for sorting.  This format is ideal for using the pivot table feature of Excel.  Here are the same data as in the previous example but shown in this alternative format:</p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">ERPset   bin           channel      value  </span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S1        1            1             2.265</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S1        1            2             4.173</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S1        1            3             4.352</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S1        2            1             4.300</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S1        2            2            10.754</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S1        2            3             9.814</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S2        1            1             1.776</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S2        1            2             4.027</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S2        1            3             4.175</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S2        2            1             3.914</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S2        2            2            10.029</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S2        2            3             9.268</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S3        1            1             2.265</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S3        1            2             4.173</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S3        1            3             4.352</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S3        2            1             4.300</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S3        2            2            10.754</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">S3        2            3             9.814</span></p>
<p class="paragraph">&nbsp;</p>
<p class="paragraph">The values can also be stored in the Matlab workspace in the variable <strong>ERP_MEASURES</strong>.  You can see them by simply typing<strong> ERP_MEASURES</strong>  at the Matlab command line, yielding an output that looks like this:</p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">&gt;&gt; ERP_MEASURES</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">&nbsp;</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">ERP_MEASURES(:,:,1) =</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">&nbsp;</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">    2.2648    4.1730    4.3524</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">    4.2995   10.7537    9.8138</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">&nbsp;</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">&nbsp;</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">ERP_MEASURES(:,:,2) =</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">&nbsp;</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">    1.7761    4.0267    4.1753</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">    3.9139   10.0288    9.2685</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">&nbsp;</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">&nbsp;</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">ERP_MEASURES(:,:,3) =</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">&nbsp;</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">    2.2648    4.1730    4.3524</span></p>
<p class="paragraph" style="margin-bottom:.0001pt;line-height:8.0pt;"><span style="font-family:Courier; font-size:8.0pt; ">    4.2995   10.7537    9.8138</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table width="100%" border="0">
  <tr>
    <td><a href="Averaging_ERPsets.html">&lt;&lt;Averaging Across ERPsets</a><a href="Topographic_Mapping.html"></a></td>
    <td><a href="index.html">Table of Contents</a></td>
    <td>&nbsp;</td>
  </tr>
</table>
</body>
</html>
