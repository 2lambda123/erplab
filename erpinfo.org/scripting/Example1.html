<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Example 1: The World's Simplest EEGLAB/ERPLAB Script</title>

<link href="styles/erplab.css" rel="stylesheet" type="text/css" />
<style type="text/css">
<!--
p.paragraph {
margin-top:0in;
margin-right:0in;
margin-bottom:8.0pt;
margin-left:0in;
text-align:justify;
font-size:11.0pt;
font-family:Cambria;
}
p.LiteralText {
margin:0in;
margin-bottom:.0001pt;
font-size:10.0pt;
font-family:Helvetica;
}
-->
</style>
</head>

<body>
<p class="paragraph"><em>Note: A complete version of this script is available in <strong>Test_Data &gt; Script_Examples &gt; Script1.m</strong>.  However, this script may not work on your computer, because it assumes that the <strong>Test_Data</strong> folder is in a specific location.  See instructions below for details.</em></p>
<p class="paragraph">In this example, we will do a single EEGLAB step—loading a dataset—in the GUI, look at the history this creates, and then turn it into the world's simplest EEGLAB script.  This will give you the basic idea, and more useful scripts will be shown in the following sections.</p>
<h2><a name="start" id="start"></a>Getting Started</h2>
<p class="paragraph">To begin, launch Matlab and eeglab; if they have already been launched, quit from eeglab, type <strong>clear all</strong>, and launch eeglab again.  This will make sure that you are &quot;starting from scratch&quot; and won't get confused by old things in the history.  Now set Matlab's current directory to be the folder with the tutorial data from subject S1.  To do this, look at<span style="color:black; "> the top of the Matlab command </span>window<span style="color:black; ">, where you will see a drop-down menu displaying the current directory (see screenshot below).  Click on the <strong>browse</strong> button (labeled with '…') to the right of the current directly and choose the <strong>S1</strong> folder.  The top of the window will then look something like this (although the details depend on what operating system you are using and where you've put the tutorial data):</span></p>
<p><img src="images/Set_Current_Folder.jpg" alt="set current folder" width="817" height="63" /></p>
<h2><a name="load" id="load"></a>Loading a dataset with the GUI to create a history</h2>
<p class="paragraph">The next step is to use <strong>FILE &gt; Load existing dataset</strong> to load the file named <strong>S1_EEG.set</strong> into EEGLAB.  You will see that <strong>S1_EEG</strong> is now in the <strong>Datasets</strong> menu.</p>
<p class="paragraph">Now type <strong>eegh</strong> in the command window.  This will show you the history so far, which includes the EEGLAB script command for this step.  Something like the following will appear in the command window (but some things may be different because the path to the <strong>S1_EEG.set</strong> file is probably not the same on your computer as it is on mine).</p>
<p class="LiteralText">&gt;&gt; eegh</p>
<p class="LiteralText">[ALLEEG EEG CURRENTSET ALLCOM] = eeglab;</p>
<p class="LiteralText">EEG = pop_loadset('filename','S1_EEG.set','filepath','/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/documentation/Scripting/Examples/S1/');</p>
<p class="MsoNormal"><span style="font-family:Helvetica; font-size:10.0pt; ">[ALLEEG, EEG, CURRENTSET] = eeg_store( ALLEEG, EEG, 0 );</span></p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">The first line represents the initial launching of EEGLAB. The second line is the command for loading a dataset (it begins <strong>EEG = pop_loadset</strong>…).  The third line reflects an important aspect of how EEGLAB stores datasets.  The currently active dataset is stored in the EEG variable, and the line that loads the file stores the new dataset in this variable (that's what the <strong>EEG =</strong> part of the line means).  EEGLAB can have multiple datasets loaded at one time (these are the datasets that you can ordinarily see in the <strong>Datasets</strong> menu).  This group of datasets is stored in a variable called <strong>ALLEEG</strong>.  When you do something that creates or updates a dataset—stored in the EEG structure—you can put this into the <strong>ALLEEG</strong> structure with the <strong>eeg_store</strong> command (the third line in the history shown above).  This is necessary only if you want to keep multiple EEG datasets active at one time (e.g., if you want to be able to select them in the <strong>Datasets</strong> menu).</p>
<h2><a name="command" id="command"></a>Executing a command from the command line</h2>
<p class="paragraph">In Matlab, you can execute commands from scripts or from the command line.  Let's start by executing the three commands from the EEGLAB history.  To do this, first quit EEGLAB (but not Matlab)—you should do this because the first command will launch EEGLAB, and you don't want it to be running already when you do this.  Then copy the three lines from the eegh output into the clipboard  <strong>Do not copy these from this documentation file</strong>.  If you copy it from this file, you will have the path that works on my computer, which is probably not right for your computer.  Instead, copy the three lines from the output of the <strong>eegh</strong> command in the Matlab command window.  Then put the cursor on the bottom line in the command window, paste, and hit Enter (or Return).</p>
<p class="paragraph">EEGLAB will print the usual information that it prints when starting, followed by something like: </p>
<p class="LiteralText">Reading float file '/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Documentation_old/Scripting/Examples/S1/S1_EEG.dat'...</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">If you get an error message, you probably don't have the correct path or you didn't have the right three lines in your history (which might happen if you did some things in the GUI other than the steps described here). </p>
<p class="paragraph">The <strong>S1_EEG</strong> file has been loaded, and you can verify this by typing <strong>EEG</strong> (followed by RETURN or ENTER) on the command line.  (Hint: Typing a variable or command without a semicolon at the end will cause the value of the variable or command to be printed in the command window.)  It will then show you the contents of the <strong>EEG</strong> variable, which will look something like this (but with many additional lines):</p>
<p class="LiteralText">&gt;&gt; EEG</p>
<p class="LiteralText">EEG = </p>
<p class="LiteralText">            setname: 'S1_EEG'</p>
<p class="LiteralText">            filename: 'S1_EEG.set'</p>
<p class="LiteralText">            filepath: '/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Test_Data/S1/'</p>
<p class="LiteralText">            subject: ''</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">However, you may notice that you do not see <strong>S1_EEG</strong> in the <strong>Datasets</strong> menu.  This is because the EEGLAB GUI doesn't &quot;know&quot; that you've loaded a dataset.</p>
<h2><a name="redraw" id="redraw"></a>Using eeglab redraw to synchronize with the GUI</h2>
<p class="paragraph">To let the GUI know about any changes you've made with commands from the command line or from a script, you should type <strong>eeglab redraw</strong> in the command window.  When you do this, you will see that the <strong>Datasets</strong> menu is now active and that <strong>S1_EEG</strong> is now visible in the EEGLAB GUI, which should look like this:</p>
<p><img src="images/EEGLAB_GUI.jpg" alt="EEGLAB_GUI" width="376" height="258" /></p>
<h2><a name="create" id="create"></a>Creating and executing the script</h2>
<p class="paragraph">Now we will create a script that executes the <strong>EEG = pop_loadset</strong> command.  To do this, go to the Matlab <strong>File</strong> menu (not the EEGLAB <strong>File</strong> menu) and select <strong>File &gt; New &gt; Script</strong>.  This will create a new, blank window.  You can simply paste the second two of the three commands from your history into this window (you can skip the first command, which launches EEGLAB, as long as you make sure that EEGLAB is running when you run the script).  Save the script as a file named something like <strong>myscript.m</strong>.  You can put it in any folder you'd like, but this folder will need to become a part of your Matlab path (or it can be in Matlab's current folder).  The script will look something like this:</p>
<p><img src="images/Script.jpg" alt="Script" width="780" height="108" /></p>
<p class="paragraph">You can now execute the script.  There are various ways to do this, and they may be somewhat different in different versions of Matlab.  You might do it by selecting <strong>Debug &gt; Run myscript.m</strong>, as shown in the following screenshot.  </p>
<p><img src="images/Debug.jpg" alt="Debug" width="272" height="300" /></p>
<p class="paragraph">There may also be a button you can click near the top of the script window (like the button with the green triangle under the <strong>Help</strong> menu in the screenshot below.</p>
<p><img src="images/Run_Button.jpg" alt="Run_Button" width="571" height="95" /></p>
<p class="paragraph">It is now time for you to finally run the script (with the <strong>Debug</strong> menu, the button with green triangle, or however you want to do it).  You might see the following error message, which means that the script isn't in the Matlab path.  You can click the <strong>Add to Path</strong> button, and then the script should run.</p>
<p><img src="images/Warning.jpg" alt="Warning" width="570" height="178" /></p>
<p class="paragraph">When you run the script, you might not see much happen, but you should see some evidence of it in the command window.  If you look in the <strong>Datasets</strong> menu, you should still be able to see <strong>S1_EEG</strong> from when you loaded it earlier.  The EEGLAB GUI doesn't yet &quot;know&quot; that you loaded it again.  If you type <strong>eeglab redraw</strong> in the command window, you should now see that the <strong>S1_EEG</strong> dataset now appears twice in the <strong>Datasets</strong> menu (just as if you loaded it a second time from the GUI).  Note that you could simply put <strong>eeglab redraw</strong> at the end of your script.</p>
<p>&nbsp;</p>
<table width="100%" border="0">
  <tr>
    <td><a href="Getting_Started.html">&lt;&lt;Getting Started</a></td>
    <td><a href="index.html">Table of Contents</a></td>
    <td><a href="Example2.html">Example 2&gt;&gt;</a></td>
  </tr>
</table>
</body>
</html>
