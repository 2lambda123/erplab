<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Example 3b: Modifying the Script to Work for Different Subjects</title>

<link href="styles/erplab.css" rel="stylesheet" type="text/css" />
<style type="text/css">
<!--
p.paragraph {
margin-top:0in;
margin-right:0in;
margin-bottom:8.0pt;
margin-left:0in;
text-align:justify;
font-size:11.0pt;
font-family:Cambria;
}
p.LiteralText {
margin:0in;
margin-bottom:.0001pt;
font-size:10.0pt;
font-family:Helvetica;
}
-->
</style>
</head>

<body>
<p class="paragraph"><em>Note: A complete version of this script is available in <strong>Test_Data &gt; Script_Examples &gt; Script3b.m</strong>.</em></p>
<p class="paragraph">The script you made in the previous step is nice for processing the data from subject <strong>S1</strong>, but it would be a hassle to make it work for subject <strong>S2</strong>, because you'd have to change every instance of <strong>S1</strong> to <strong>S2</strong> in the script.  In this example, you'll learn how to make the script more flexible so that it can easily work for other subjects.  </p>
<h2><a name="learning" id="learning"></a>Learning a little Matlab trick</h2>
<p class="paragraph">First, you need to know about a little Matlab trick for combining different strings together.  In our script, we'd like to be able to construct strings like <strong>'S1_EEG.set'</strong> and <strong>'S2_EEG.set'</strong>.  That is, we want to combine <strong>'S1'</strong> or <strong>'S2'</strong> with <strong>'_EEG.set'</strong>.  To see how this can be done in Matlab, type the following into the command line:</p>
<p class="LiteralText">x = 'S1';</p>
<p class="LiteralText">y = 'S2';</p>
<p class="LiteralText">z = '_EEG.set';</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">You have now created 3 variables—<strong>x</strong>, <strong>y</strong>, and <strong>z</strong>.  To see the value of a variable, you can just type the name of the variable at the command line (without a semicolon), like this:</p>
<p class="LiteralText">&gt;&gt; x</p>
<p class="LiteralText">x =</p>
<p class="LiteralText">S1</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">Now we will create a new variable named <strong>filename</strong> that combines the <strong>x</strong> and <strong>z</strong> variables.  To do this, type the following into the command line:</p>
<p class="LiteralText">filename = [x z]</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">Make sure you do it without the semicolon at the end.  When you do this, you've created the <strong>filename</strong> variable and given it a value that concatenates the values of the <strong>x</strong> and <strong>y</strong> variables.  Because you did not put a semicolon at the end of the command, Matlab will print the value of the command in the command window, which should look something like this:</p>
<p class="LiteralText">filename =</p>
<p class="LiteralText">S1_EEG.set</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">You've now created a variable that contains the string <strong>'S1_EEG.set'</strong>. It would be easy to change the variable to be <strong>'S2_EEG.set'</strong> by typing <strong>filename = [y z]</strong>.  Try this and verify that it gives you <strong>'S2_EEG.set'</strong>.  You can also do this by combining a string and a variable.  For example, try typing <strong>filename = ['S3' z]</strong>.  This should give you <strong>'S3_EEG.set'</strong>.</p>
<h2><a name="adding" id="adding"></a>Adding subject and path variables to the script</h2>
<p class="paragraph">Now that you've learned this little trick, let's apply it to the script you created in the previous step.  Start by creating a new script file that is exactly like the previous one.  Put the following two lines at the very top to define a variable named <strong>subject</strong> that will  initially contain <strong>'S1'</strong> and a variable named <strong>subjectfolder</strong> that contains the path to the subject's folder:</p>
<p class="LiteralText">subject = 'S1';</p>
<p class="LiteralText">subjectfolder = ['/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Test_Data/' subject '/']; <em>[Note that you must replace this path with the appropriate path for your computer]</em></p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph"><span class="LiteralText">Note that there are spaces before and after<strong> subject</strong> in the second of these two lines <strong></strong>— without these spaces, Matlab will not know that <strong>subject</strong> is separate from the strings that precede and follow it.</span> If you are missing one or more of these spaces, you will get a (very unhelpful) message from Matlab saying &quot;Error: Unexpected MATLAB expression&quot;.</p>
<p class="paragraph">In addition, you should keep in mind that there is nothing special about the variable names <strong>subject</strong> and <strong>subjectfolder</strong>—you could use <strong>qwerty</strong> or <strong>bobsyouruncle</strong> or anything else that is a legal Matlab variable name.  But it's a very good idea to use meaningful variable names rather than things like <strong>x</strong> or <strong>qzzaz</strong>.  Also, note that the first part of the <strong>subjectfolder</strong> definition should reflect the appropriate path for your computer (which you can see by typing <strong>pwd</strong> in the command window).</p>
<p class="paragraph">The next step is to go through the script and use our new Matlab trick to replace every occurrence of <strong>S1</strong> with a set of square brackets containing <strong>subject</strong> or <strong>subjectfolder </strong>along with the rest of the string.  For example, you should replace<strong> 'S1_EEG.set'</strong> with <strong>[subject '_EEG.set']</strong> in the <strong>pop_loadset</strong> command, and you should replace<strong> 'S1_Chan'</strong> with <strong>[subject '_Chan']</strong> in the <strong>pop_editset </strong>command.  You should also follow each occurrence of <strong>'filepath'</strong> with <strong>subjectfolder</strong>.  The result will look like this (notice that the lines beginning with a percent sign are comments that I've inserted to explain the changes on the following line):</p>
<p class="LiteralText">subject = <span style="color:#A020F0; ">'S1'</span>;</p>
<p class="LiteralText">subjectfolder = [<span style="color:#A020F0; ">'/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Test_Data/'</span> subject <span style="color:#A020F0; ">'/'</span>];</p>
<p class="LiteralText"> </p>
<p class="LiteralText"><span style="color:forestgreen; ">% 'S1_EEG.set' was replaced with [subject '_EEG.set'], and </span></p>
<p class="LiteralText"><span style="color:forestgreen; ">% '/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Test_Data/S1/' was replaced with subjectfolder</span></p>
<p class="LiteralText">EEG = pop_loadset(<span style="color:#A020F0; ">'filename'</span>, [subject <span style="color:#A020F0; ">'_EEG.set'</span>],<span style="color:#A020F0; ">'filepath'</span>, subjectfolder);</p>
<p class="LiteralText">[ALLEEG, EEG, CURRENTSET] = eeg_store( ALLEEG, EEG, 0 );</p>
<p class="LiteralText">EEG=pop_chanedit(EEG, <span style="color:#A020F0; ">'lookup'</span>,<span style="color:#A020F0; ">'/Users/luck/Documents/Software_Development/eeglab9_0_2_3b/plugins/dipfit2.2/standard_BESA/standard-10-5-cap385.elp'</span>);</p>
<p class="LiteralText">[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);</p>
<p class="LiteralText"> </p>
<p class="LiteralText"><span style="color:forestgreen; ">% 'S1_Chan'was replaced with [subject '_Chan']</span></p>
<p class="LiteralText">EEG = pop_editset(EEG, <span style="color:#A020F0; ">'setname'</span>, [subject <span style="color:#A020F0; ">'_Chan'</span>]);</p>
<p class="LiteralText">[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);</p>
<p class="LiteralText"> </p>
<p class="LiteralText"><span style="color:forestgreen; ">% 'S1_Chan.set'was replaced with [subject '_Chan.set'], and</span></p>
<p class="LiteralText"><span style="color:forestgreen; ">% '/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Test_Data/S1/' was replaced with subjectfolder</span></p>
<p class="LiteralText">EEG = pop_saveset( EEG, <span style="color:#A020F0; ">'filename'</span>, [subject <span style="color:#A020F0; ">'_Chan.set'</span>],<span style="color:#A020F0; ">'filepath'</span>, subjectfolder);</p>
<p class="LiteralText">[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);</p>
<p class="LiteralText">EEG = pop_creabasiceventlist(EEG, <span style="color:#A020F0; ">'Newboundary'</span>, {-99}, <span style="color:#A020F0; ">'Stringboundary'</span>, { <span style="color:#A020F0; ">'boundary'</span> }, <span style="color:#A020F0; ">'Warning', 'on'</span>);</span></p>
<p class="LiteralText">[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 1,<span style="color:#A020F0; ">'gui'</span>,<span style="color:#A020F0; ">'off'</span>); </p>
<p class="LiteralText"> </p>
<p class="LiteralText"><span style="color:forestgreen; ">% '/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Test_Data/S1/binlister_demo_1.txt' </span></p>
<p class="LiteralText"><span style="color:forestgreen; ">% was replaced with [subjectfolder 'binlister_demo_1.txt']</span></p>
<p class="LiteralText">EEG  = pop_binlister( EEG , <span style="color:#A020F0; ">'BDF'</span>, [subjectfolder <span style="color:#A020F0; ">'binlister_demo_1.txt'</span>],<span style="color:#A020F0; "> 'ImportEL'</span>,<span style="color:#A020F0; "> 'no'</span>,<span style="color:#A020F0; "> 'Saveas'</span>,<span style="color:#A020F0; "> 'on'</span>,<span style="color:#A020F0; "> 'SendEL2'</span>,<span style="color:#A020F0; "> 'EEG'</span>,<span style="color:#A020F0; "> 'Warning'</span>,<span style="color:#A020F0; "> 'on' </span>);</p>
<p class="LiteralText">[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);</p>
<p class="LiteralText">EEG = pop_epochbin( EEG , [-200.0  800.0],  <span style="color:#A020F0; ">'pre'</span>);</p>
<p class="LiteralText">[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 3,<span style="color:#A020F0; ">'gui'</span>,<span style="color:#A020F0; ">'off'</span>); </p>
<p class="LiteralText">EEG  = pop_artmwppth( EEG , <span style="color:#A020F0; ">'Channel'</span>,  1:16, <span style="color:#A020F0; ">'Flag'</span>,  1,<span style="color:#A020F0; "> 'Threshold'</span>,  100, <span style="color:#A020F0; ">'Twindow'</span>, [ -200 798],<span style="color:#A020F0; "> 'Windowsize'</span>,  200, <span style="color:#A020F0; ">'Windowstep'</span>,  50 );</p>
<p class="LiteralText">[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 4,<span style="color:#A020F0; ">'gui'</span>,<span style="color:#A020F0; ">'off'</span>);</p>
<p class="LiteralText">ERP = pop_averager( ALLEEG , <span style="color:#A020F0; ">'Criterion'</span>, 1, <span style="color:#A020F0; ">'DSindex'</span>,4, <span style="color:#A020F0; ">'Stdev'</span>, <span style="color:#A020F0; ">'on'</span>);</p>
<p class="LiteralText"> </p>
<p class="LiteralText"><span style="color:forestgreen; ">% 'S1_ERP'was replaced with [subject '_ERP'], and</span></p>
<p class="LiteralText"><span style="color:forestgreen; ">% '/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Test_Data/S1/S1_ERP.erp' </span></p>
<p class="LiteralText"><span style="color:forestgreen; ">% was replaced with [subjectfolder subject '_ERP.erp']</span></p>
<p class="LiteralText">ERP = pop_savemyerp(ERP, <span style="color:#A020F0; ">'erpname'</span>, <span style="color:#A020F0; ">'S1_ERP'</span>, <span style="color:#A020F0; ">'filename'</span>, [subject  <span style="color:#A020F0; ">'_ERP.erp'</span>], <span style="color:#A020F0; ">'pathname'</span>, subjectfolder, <span style="color:#A020F0; ">'warning'</span>, <span style="color:#A020F0; ">'on'</span>);</p>
<p class="LiteralText">eeglab <span style="color:#A020F0; ">redraw</span>;</p>
<p class="paragraph">&nbsp;</p>
<p class="paragraph">Once you've made all of these changes, try running the script.  But first, exit EEGLAB, type <strong>clear all</strong> in the command window, and launch EEGLAB again (the next sections will explain how you can avoid the need for this, although it's often a good idea).  Then run your script.</p>
<p class="paragraph">Unless you were incredibly careful, you probably made at least one error when making all of these changes.  For example, if you didn't leave a space between <strong>subject</strong> and <strong>'_Chan'</strong> in the <strong>pop_editset</strong> command, you would get an error message like this:</p>
<p class="LiteralText"><span style="color:red; ">??? Error: File: Script3b.m Line: 17 Column: 44</span></p>
<p class="LiteralText"><span style="color:red; ">The input character is not valid in MATLAB statements or expressions.</span></p>
<p class="LiteralText"><span style="color:red; ">&nbsp;</span></p>
<p class="paragraph">Similarly, if you did not put the correct path for the Test_Data folder in the <strong>subjectfolder</strong> variable, you will get a message like this:</p>
<p class="LiteralText"><span style="color:red; ">??? Error using ==&gt; load Unable to read file /Users/luck/Documents/Software_Development/ERPLAB_Toolbox2/Test_Data/S1/S1_EEG.set: No such file or directory. Error in ==&gt; pop_loadset at 107 TMPVAR = load(filename, '-mat'); Error in ==&gt; Script3b at 10 EEG = pop_loadset('filename', [subject '_EEG.set'],'filepath', subjectfolder);</span></p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">You will doubtless find this aggravating and frustrating.  I'm not sure if you will find this comforting, but for most scripts you will probably spend more time tracking down and fixing problems than you will spend actually writing the initial script.  That has always been my experience, and it's also true for professional programmers. <a href="Debugging.html">Click here for some tips on debugging</a>.</p>
<h2><a name="avg" id="avg"></a>Averaging from EEG instead of ALLEEG</h2>
<p class="paragraph">Once you get your script running, you are almost ready to try it on subject <strong>S2</strong>.  But there are two more little things that we need to fix to get the script to work for another subject.  The first is that, when you do all the processing steps in the GUI and then average the data, you tell the averaging command which dataset(s) to average by specifying the dataset number within the <strong>Datasets</strong> menu.  In our example, the dataset we actually average ends up being the fourth dataset, as shown in the next screenshot.</p>
<p><img src="images/datasets.jpg" alt="datasets" width="450" height="154" /></p>
<p class="paragraph">In our scripts so far, this number 4 gets sent to the <strong>pop_averager()</strong> routine like this:</p>
<p class="LiteralText">ERP = pop_averager( ALLEEG , 'Criterion',1, 'DSindex',4, 'Stdev', 'on' );</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">This line of the script says to average dataset #4 from within the ALLEEG structure.  The problem with this in a script is that you can't easily guarantee that the appropriate dataset will be the fourth dataset.  If, for example, you run the script with subject <strong>S1</strong> and then immediately run it with subject <strong>S2</strong>, the datasets from <strong>S1</strong> may still be loaded as datasets #1-4, and the datasets for <strong>S2</strong> will become datasets #5-8.</p>
<p class="paragraph">The solution to this is to send the current <strong>EEG</strong> structure to the <strong>pop_averager()</strong> routine rather than the <strong>ALLEEG</strong> structure.  Most EEGLAB and ERPLAB commands that operate on EEG data return both an <strong>ALLEEG</strong> structure and an <strong>EEG</strong> structure.  As long as you want to average the current <strong>EEG</strong> structure, you can change this line in your script to this: </p>
<p class="LiteralText">ERP = pop_averager( EEG , 'Criterion',1, 'DSindex',1, 'Stdev', 'on' );</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">When you do this, it doesn't matter what other datasets are present in <strong>ALLEEG</strong>.  It just matters that the <strong>EEG</strong> structure has the right data in it, which it should if you average immediately after doing a series of EEG commands.  In our script, for example, we average right after updating the <strong>EEG</strong> structure by performing artifact detection with the <strong>pop_artmwppth</strong> routine.</p>
<h2><a name="bdf" id="bdf"></a>Putting the bin descriptor file in the parent folder</h2>
<p class="paragraph">The next thing you need to fix is the location of the bin descriptor file, <strong>'binlister_demo_1.txt'</strong>.  In our script so far, we've assumed that this file is in the <strong>S1</strong> folder.  You will use the same bin descriptor file for every subject, so it doesn't make sense to have a separate copy in every subject's folder.  Instead, you should put it in the <em>parent</em> folder (the folder that contains the <strong>S1</strong> folder and the folders for all the other subjects).  After you've done this, you will need to make some changes to your script so that it looks in the right place for this file.  First, you will define a variable named <strong>parentfolder</strong> in your script (and use it when defining the <strong>subjectfolder</strong> variable), as follows:</p>
<p class="LiteralText">subject = <span style="color:#A020F0; ">'S1'</span>;</p>
<p class="LiteralText">parentfolder = <span style="color:#A020F0; ">'/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Test_Data/'</span>;</p>
<p class="LiteralText">subjectfolder = [parentfolder subject <span style="color:#A020F0; ">'/'</span>];</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">As usual, the exact path should reflect your computer's organization.  The final step is to update the <strong>pop_binlister</strong> command so that it looks for the bin descriptor file in the parent folder:</p>
<p class="LiteralText">EEG  = pop_binlister( EEG , <span style="color:#A020F0; ">'BDF'</span>, [parentfolder <span style="color:#A020F0; ">'binlister_demo_1.txt'</span>],<span style="color:#A020F0; "> 'ImportEL'</span>,<span style="color:#A020F0; "> 'no'</span>,<span style="color:#A020F0; "> 'Saveas'</span>,<span style="color:#A020F0; "> 'on'</span>,<span style="color:#A020F0; "> 'SendEL2'</span>,<span style="color:#A020F0; "> 'EEG'</span>,<span style="color:#A020F0; "> 'Warning'</span>,<span style="color:#A020F0; "> 'on' </span>);</p>
<h2><a name="path" id="path"></a>Changing the path for the electrode locations file</h2>
<p class="paragraph">The last little thing you need to fix is the location of the file used to add the electrode locations, <strong>standard-10-5-cap385.elp</strong>.  In our script so far, we've used the full path to the file, which we've gotten from the EEGLAB history.  This file is probably located in the EEGLAB folder, and if you upgrade to a new version of EEGLAB, this folder will have a different name, and the script will stop working properly.  To avoid this, we can just rid of the path information that precedes the <strong>standard-10-5-cap385.elp</strong> filename.  As long as the folder that contains this file is in your Matlab path, EEGLAB will be able to find the file.  To make this change, just edit the line with the <strong>pop_chanedit()</strong> command so that it looks like this:</p>
<p class="LiteralText">EEG=pop_chanedit(EEG, <span style="color:#A020F0; ">'lookup'</span>,<span style="color:#A020F0; ">'standard-10-5-cap385.elp'</span>);</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">The whole script should now look something like this:</p>
<p class="LiteralText">subject = <span style="color:#A020F0; ">'S1'</span>;</p>
<p class="LiteralText">parentfolder = <span style="color:#A020F0; ">'/Users/luck/Documents/Software_Development/ERPLAB_Toolbox/Test_Data/'</span>;</p>
<p class="LiteralText"><span style="color:forestgreen; ">%Note the spaces before and after subject in the following line</span>
</p><p class="LiteralText">subjectfolder = [parentfolder subject <span style="color:#A020F0; ">'/'</span>];</p>
<p class="LiteralText"> </p>
<p class="LiteralText">EEG = pop_loadset(<span style="color:#A020F0; ">'filename'</span>, [subject <span style="color:#A020F0; ">'_EEG.set'</span>],<span style="color:#A020F0; ">'filepath'</span>, subjectfolder);</p>
<p class="LiteralText">[ALLEEG, EEG, CURRENTSET] = eeg_store( ALLEEG, EEG, 0 );</p>
<p class="LiteralText">EEG=pop_chanedit(EEG, <span style="color:#A020F0; ">'lookup'</span>,<span style="color:#A020F0; ">'standard-10-5-cap385.elp'</span>);</p>
<p class="LiteralText">[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);</p>
<p class="LiteralText">EEG = eeg_checkset( EEG );</p>
<p class="LiteralText">EEG = pop_editset(EEG, <span style="color:#A020F0; ">'setname'</span>, [subject <span style="color:#A020F0; ">'_Chan'</span>]);</p>
<p class="LiteralText">[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);</p>
<p class="LiteralText"><span style="color:forestgreen; ">%EEG = eeg_checkset( EEG );</span></p>
<p class="LiteralText">EEG = pop_saveset( EEG, <span style="color:#A020F0; ">'filename'</span>, [subject <span style="color:#A020F0; ">'_Chan.set'</span>],<span style="color:#A020F0; ">'filepath'</span>, subjectfolder);</p>
<p class="LiteralText">[ALLEEG EEG] = eeg_store(ALLEEG, EEG, CURRENTSET);</p>
<p class="LiteralText">EEG = pop_creabasiceventlist(EEG, <span style="color:#A020F0; ">'Newboundary'</span>, {-99}, <span style="color:#A020F0; ">'Stringboundary'</span>, { <span style="color:#A020F0; ">'boundary'</span> }, <span style="color:#A020F0; ">'Warning', 'on'</span>);</span></p>
<p class="LiteralText">[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 1,<span style="color:#A020F0; ">'gui'</span>,<span style="color:#A020F0; ">'off'</span>); </p>
<p class="LiteralText">EEG  = pop_binlister( EEG , <span style="color:#A020F0; ">'BDF'</span>, [parentfolder <span style="color:#A020F0; ">'binlister_demo_1.txt'</span>],<span style="color:#A020F0; "> 'ImportEL'</span>,<span style="color:#A020F0; "> 'no'</span>,<span style="color:#A020F0; "> 'Saveas'</span>,<span style="color:#A020F0; "> 'on'</span>,<span style="color:#A020F0; "> 'SendEL2'</span>,<span style="color:#A020F0; "> 'EEG'</span>,<span style="color:#A020F0; "> 'Warning'</span>,<span style="color:#A020F0; "> 'on' </span>);</p>
<p class="LiteralText">EEG = pop_epochbin( EEG , [-200.0  800.0],  <span style="color:#A020F0; ">'pre'</span>);</p>
<p class="LiteralText">[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 3,<span style="color:#A020F0; ">'gui'</span>,<span style="color:#A020F0; ">'off'</span>); </p>
<p class="LiteralText">EEG  = pop_artmwppth( EEG , <span style="color:#A020F0; ">'Channel'</span>,  1:16, <span style="color:#A020F0; ">'Flag'</span>,  1,<span style="color:#A020F0; "> 'Threshold'</span>,  100, <span style="color:#A020F0; ">'Twindow'</span>, [ -200 798],<span style="color:#A020F0; "> 'Windowsize'</span>,  200, <span style="color:#A020F0; ">'Windowstep'</span>,  50 );</p>
<p class="LiteralText">[ALLEEG EEG CURRENTSET] = pop_newset(ALLEEG, EEG, 4,<span style="color:#A020F0; ">'gui'</span>,<span style="color:#A020F0; ">'off'</span>);</p>
<p class="LiteralText">ERP = pop_averager( EEG , <span style="color:#A020F0; ">'Criterion'</span>, 1, <span style="color:#A020F0; ">'DSindex'</span>,1, <span style="color:#A020F0; ">'Stdev'</span>, <span style="color:#A020F0; ">'on'</span>);</p>
<p class="LiteralText">ERP = pop_savemyerp(ERP, <span style="color:#A020F0; ">'erpname'</span>, <span style="color:#A020F0; ">'S1_ERP'</span>, <span style="color:#A020F0; ">'filename'</span>, [subject <span style="color:#A020F0; ">'_ERP.erp'</span>], <span style="color:#A020F0; ">'pathname'</span>, subjectfolder, <span style="color:#A020F0; ">'warning'</span>, <span style="color:#A020F0; ">'on'</span>);</p>
<p class="LiteralText">eeglab <span style="color:#A020F0; ">redraw</span>;</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">You can now go ahead and run this script.  This time you don't need to exit and restart EEGLAB first.</p>
<p class="paragraph">Once you get the script to run, notice that the datasets created by this script are appended onto the <strong>Datasets</strong> menu, so you will probably now have 8 datasets instead of 4.  If you want, you can eliminate the <strong>eeg_store</strong> and <strong>pop_newset</strong> commands from the script (except perhaps the last <strong>pop_newset </strong>command).  If you do this, the intermediate datasets won't be available in the GUI, but you don't usually need them anyway.</p>
<p class="paragraph">Now you are ready to run this script on subject <strong>S2</strong>.  To do this, simply change the assignment of the <strong>subject</strong> variable in the first line to this:</p>
<p class="LiteralText">subject = <span style="color:#A020F0; ">'S2'</span>;</p>
<p class="LiteralText">&nbsp;</p>
<p class="paragraph">Now you can run the script for <strong>S2</strong>.  And then you can change this one line to <strong>'S3'</strong> to run the script on subject #3.  It has taken a while to get to this point, but now you can (I hope!) see how scripting can make your life easier once you get the hang of it.</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<table width="100%" border="0">
  <tr>
    <td><a href="Example3.html">&lt;&lt;Example 3</a></td>
    <td><a href="index.html">Table of Contents</a></td>
    <td><a href="Example3c.html">Example 3c&gt;&gt;</a></td>
  </tr>
</table>
</body>
</html>
