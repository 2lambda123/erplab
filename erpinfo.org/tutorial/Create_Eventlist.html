<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Creating an EventList</title>

<link href="styles/erplab.css" rel="stylesheet" type="text/css" />
<style type="text/css">
<!--
p.paragraph {
margin-top:0in;
margin-right:0in;
margin-bottom:8.0pt;
margin-left:0in;
font-size:11.0pt;
font-family:Cambria;
}
-->
</style>
<style type="text/css">
<!--
p.MsoNormal {
margin:0in;
margin-bottom:.0001pt;
font-size:12.0pt;
font-family:Cambria;
}
-->
</style>
</head>

<body>
<p class="paragraph">We are now ready to get into the ERPLAB functions.  We will begin with some housekeeping, then do artifact rejection, and finally averaging.  </p>
<p class="paragraph">The event codes are embedded in a dataset within EEGLAB's <strong>EEG</strong> structure, which is pretty complicated.  To make it easier to see and manipulate the event codes, ERPLAB creates an EventList, which is a list of all of the event codes and associated information.  Internally, ERPLAB stores this as an <strong>EVENTLIST</strong> structure (which is appended onto the <strong>EEG</strong> structure as <strong>EEG.EVENTLIST</strong>).  But the EventList can also be saved in a text file, where you can easily see and manipulate the event information.  If you make any changes, you can import it back into the <strong>EEG</strong> structure.  We will show an example of this later in the tutorial.</p>
<p class="paragraph">To use ERPLAB, you must create an EventList for the <strong>EEG</strong> stored in your dataset.  The simplest way to do this is to choose <strong>ERPLAB &gt; EventList &gt; Create EEG EventList – Basic</strong>.  This is pretty self-explanatory, so we will show you how to use <strong>ERPLAB &gt; EventList &gt; Create EEG EventList – Advanced</strong>.  The advanced version allows you to define a text label for each numeric event code (or vice versa), which helps to avoid the errors that often occur in experiments with many different event codes.  It also allows you to define the bins that you will use to sort your EEG epochs for averaging.  In most cases, you will define your bins in a later step (using something called BINLISTER), but it can be done at this step if your bins are very simple.  You will use the advanced method for creating events if you want to create event labels from numeric event codes or if you want to assign the events to bins, and you will use the basic method if you don't want event labels and you will be using BINLISTER to assign events to bins.</p>
<p class="paragraph">At this point, EEGLAB and ERPLAB should be running, and S1_Chan should be the currently active dataset (you can check this in the <strong>Datasets</strong> menu). To create the EventList for this dataset, select <strong>ERPLAB &gt; EventList &gt; Create EEG EventList – Advanced</strong>, which will bring up the window shown here:</p>
<p><img src="images/Create_Eventlist.jpg" alt="Create_Eventlist" width="780" height="380" /></p>
<p class="paragraph">This window allows you to create a table (shown in the left portion of the window) that defines a set of numeric event codes, text-based event labels, bin numbers, and bin labels for each type of event in your experiment.  The current version of ERPLAB requires that each event have a numeric event code.  If your data acquisition system uses text-based labels instead of numeric codes, you must define a numeric event code for each text-based event label.  If your data acquisition system uses numeric codes, you are not required to create text-based labels for each code, but it's a good idea.  You can also define a bin for all (or some) of your event codes, along with a label for that bin.  We will do that in this example, but it is not necessary if you will be using BINLISTER in a later step to define your bins.</p>
<p class="paragraph">To keep our example simple, we will start by defining this information for only one of the trial blocks in the example experiment.  In this block, letters were rare (event code 12) and numbers were frequent (event code 22).  You can use the <strong>Event Info</strong> area of the window to define the event codes, event labels, bin numbers, and bin descriptions for each event.  For the digits, for example, you can enter <strong>22</strong> in the <strong>Event Code (number)</strong> field, <strong>Frequent_Digit</strong> in the <strong>Event Label</strong> field, <strong>1</strong> in the <strong>Bin number</strong> field, and <strong>Frequent Category (Digit)</strong> in the <strong>Bin description</strong> field (see screenshot below).  If you then click <strong>Update Line</strong>, this definition will appear in the table at the left of the window.  You can do the same thing to define the letters (event code = <strong>12</strong>, event label = <strong>Rare_Letter</strong>, bin number = <strong>2</strong>, bin description = <strong>Rare Category (letters)</strong>).  </p>
<p class="paragraph">We will be computing stimulus-locked averages rather than response-locked averages in this example, so we do not need to define bins for the response event codes.  However, it will still be useful to define labels for the response codes so that we will not have to remember that code 9 denotes a correct response and code 8 denotes an incorrect response.  The table at the left of the window in the screenshot below shows how to define these events.</p>
<p class="paragraph">Don't forget to click <strong>Update Line</strong> after entering the information for each type of event or the information will not be added to the table.  Also, your bin numbers must start at 1 and be consecutive with no breaks (but event codes need not be consecutive, and they can be any integer number that Matlab can represent).</p>
<p class="paragraph">Because you will need to do this step for every subject, you can save the table of event information in a text file (by clicking <strong>save list</strong>) and then load it in again for the next subject (by clicking <strong>open list</strong>).  If you want, you can load the file <strong>event_mapping_1.txt</strong>, which contains the table of events for this example.  You can edit this file with a text editor (such as the Matlab editor), which is more convenient than using the ERPLAB GUI for large tables of event information.  The format is pretty obvious (you can open the event_mapping_1.txt file with a text editor to see the format).</p>
<p><img src="images/Create_Eventlist2.jpg" alt="Create_Eventlist2" width="722" height="363" /></p>
<p class="paragraph">In this example, we will save the EventList in a text file to look at it later.  To do this, check the box labeled <strong>EventList Text File</strong> and click the <strong>Browse</strong> button to save the file as &quot;elist.txt&quot;.  (The .txt extension is not required, but it's a good idea.)</p>
<p class="paragraph">The check box labeled <strong>Transfer EVENTLIST info to EEG.event</strong> should be checked.  EEGLAB keeps track of event information in the <strong>EEG.event</strong> structure, and EEGLAB doesn't &quot;know&quot; anything about ERPLAB's EventList.  Moreover, the <strong>EEG.event</strong> structure can store either a numeric event code or a text-based event label for a given event, but not both.  By checking this box, you will have the opportunity to transfer your newly created labels into <strong>EEG.event</strong> so that they will be available for use by EEGLAB functions (such as the function for plotting the EEG data).</p>
<p class="paragraph">Once you have entered all of the necessary information into the window, as shown in the screenshot above, click the <strong>APPLY</strong> button to create the EventList and add it to the current dataset.  The information about event mapping must be stored in a file.  Therefore, if you have made any changes in this information, the following window will appear:</p>
<p><img src="images/save_list.jpg" alt="save_list" width="410" height="124" /></p>
<p class="paragraph">If you select <strong>Save and Continue</strong>, it creates the EventList and will put up the window shown in the next screenshot (assuming that you checked the <strong>Transfer EVENTLIST info to EEG.event</strong> box).  This window allows you to choose whether to store the event codes, the event labels, or the bin numbers in the <strong>EEG.event</strong> structure).  The default is <strong>Code Labels</strong>, and selecting this will allow you to see the labels for each event code when you look at the EEG using EEGLAB's <strong>Plot &gt; Channel data (scroll)</strong> routine.  Keep this default setting and click the <strong>APPLY</strong> button. </p>
<p><img src="images/transfer_events.jpg" alt="transfer_events" width="238" height="325" /></p>
<p class="paragraph">ERPLAB attaches the <strong>EVENTLIST</strong> structure that you just created to the current dataset, and this produces a new dataset.  Any operation that creates a new dataset will put up the window shown in the next screenshot, which gives you some options for saving the new dataset.  First, you need to specify a name for the new dataset.  This name will be stored inside the dataset, and it will be shown in the <strong>Datasets</strong> menu.  It is not necessarily the same as the name of the file in which the dataset is stored on disk, but we recommend that you use the same name for the file (if you save it as a file on disk).  ERPLAB will automatically suggest a name for the dataset, appending a string onto the end of the name of the dataset from which the new dataset was created.  When an EventList is generated, it suggests adding &quot;_elist&quot; onto the dataset name (going from &quot;S1_EEG&quot; to &quot;S1_EEG_elist&quot;).  This is not required, but it is recommended (otherwise you will have a hard time remembering what is in a given dataset.  If you check the <strong>Save it as file</strong> button and use the <strong>Browse</strong> button to select a filename, the dataset will be saved to disk.  You can also choose to either keep the previous dataset in the <strong>Datasets</strong> menu (this is the default) or overwrite the previous dataset in this menu. </p>
<div style="border:double windowtext 3.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;">
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><strong>Equivalent Script Command:</strong></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-family:Courier; color:forestgreen; ">&nbsp;</span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%The first step is to create a file named <strong>elist_equations.txt</strong> with the following contents:</span></p>
  <p class="paragraph" style="margin-bottom:.0001pt;border:none;padding:0in;">22    &quot;Frequent_Digit&quot;     1     &quot;Frequent Category (Digit)&quot; </p>
  <p class="paragraph" style="margin-bottom:.0001pt;border:none;padding:0in;">12    &quot;Rare_Letter&quot;           2     &quot;Rare Category (Letter)&quot;   </p>
  <p class="paragraph" style="margin-bottom:.0001pt;border:none;padding:0in;">  9     &quot;Corr_Resp&quot;             []                   &quot;&quot;       </p>
  <p class="paragraph" style="margin-bottom:.0001pt;border:none;padding:0in;">  8     &quot;Err_Resp&quot;               []                   &quot;&quot;       </p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%The following command creates the event list using these equations, using a fully specified path</span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%A text file with the event list saved in elist.txt in the same path</span><span style="font-size:11.0pt; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:black; ">EEG = pop_editeventlist(EEG,</span><span style="font-size:11.0pt; color:#A020F0; ">'/Users/etfoo/Desktop/tutorial_script/elist_equations.txt'</span><span style="font-size:11.0pt; color:black; ">,</span><span style="font-size:11.0pt; color:blue; "> </span><span style="font-size:11.0pt; color:#A020F0; ">'elist.txt'</span><span style="font-size:11.0pt; color:black; ">, {</span><span style="font-size:11.0pt; color:#A020F0; ">'boundary'</span><span style="font-size:11.0pt; color:black; ">}</span><span style="font-size:11.0pt; color:black; ">, {-99});</span><span style="font-size:11.0pt; color:black; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%The following command uses Matlab's <em>Current Folder</em></span><em><span style="font-size:11.0pt; color:forestgreen; "> </span></em></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:black; ">EEG = pop_editeventlist(EEG,</span><span style="font-size:11.0pt; color:#A020F0; ">'elist_equations.txt'</span><span style="font-size:11.0pt; color:black; ">,</span><span style="font-size:11.0pt; color:blue; "> </span><span style="font-size:11.0pt; color:#A020F0; ">'elist.txt'</span><span style="font-size:11.0pt; color:black; ">, {</span><span style="font-size:11.0pt; color:#A020F0; ">'boundary'</span><span style="font-size:11.0pt; color:black; ">}</span><span style="font-size:11.0pt; color:black; ">, {-99});</span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:green; ">% Copy event labels into the EEG structure</span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:black; ">EEG = pop_overwritevent( EEG, 'codelabel');</span></p>
</div>
<p><img src="images/save_set.jpg" alt="save_set" width="487" height="205" /></p>
<p class="paragraph">We find that it is usually a good idea to save the dataset to disk after you've gone through several steps; otherwise all your work will be lost if the program crashes.  And you should obviously save to disk if you are going to quit the program and you don't want to lose what you've created.  However, it usually isn't necessary to save every dataset you create – this ends up leading to a lot of big files on your hard drive.  Also, we don't usually overwrite the previous dataset, because then we can't easily back up to the previous step.  However, there are no hard-and-fast rules here; you will eventually develop a set of habits that make sense for your own needs.</p>
<p class="paragraph">For this example, you should save the new dataset to a file, named <strong>S1_EEG_elist.set</strong>, but don't overwrite the old dataset.  Click <strong>Ok</strong>, and the new dataset will be created (this may take a few seconds).  Once the new dataset has been created (you will see &quot;Done&quot; printed in the Matlab command window), you will be able to see it in the <strong>Datasets</strong> menu, as shown in the next screenshot.</p>
<div style="border:double windowtext 3.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;">
  <p class="paragraph" style="border:none;padding:0in;"><strong><span style="font-size:12.0pt; ">Equivalent Script Command:</span></strong></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%Saving after Eventlist</span><span style="font-size:11.0pt; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%Setname is S1_EEG_elist</span><span style="font-size:11.0pt; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%Filename is S1_EEG_elist.set</span><span style="font-size:11.0pt; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%Path is /Users/etfoo/Desktop/tutorial_script/</span><span style="font-size:11.0pt; color:forestgreen; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%Note that you will need to replace the path with the actual location in your file system</span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:black; ">EEG.setname=</span><span style="font-size:11.0pt; color:#A020F0; ">'S1_EEG_elist'</span><span style="font-size:11.0pt; color:black; ">; </span><span style="font-size:11.0pt; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:black; ">EEG=pop_saveset(EEG, </span><span style="font-size:11.0pt; color:#A020F0; ">'filename'</span><span style="font-size:11.0pt; color:black; ">, </span><span style="font-size:11.0pt; color:#A020F0; ">'S1_EEG_elist.set'</span><span style="font-size:11.0pt; color:black; ">, </span><span style="font-size:11.0pt; color:#A020F0; ">'filepath',…</span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:#A020F0; ">'/Users/etfoo/Desktop/tutorial_script/'</span><span style="font-size:11.0pt; color:black; ">);</span><span style="font-size:11.0pt; color:black; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:forestgreen; ">%The following command uses Matlab's <em>Current Folder</em></span><em><span style="font-size:11.0pt; color:forestgreen; "> </span></em></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; color:black; ">EEG.setname=</span><span style="font-size:11.0pt; color:#A020F0; ">'S1_EEG_elist'</span><span style="font-size:11.0pt; color:black; ">; </span><span style="font-size:11.0pt; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; ">EEG=pop_saveset(EEG,<span style="color:#A020F0; "> 'filename', 'S1_EEG_elist.set')</span>;</span><span style="font-size:11.0pt; "> </span></p>
  <p class="MsoNormal" style="text-autospace:none;border:none;padding:0in;"><span style="font-size:11.0pt; ">&nbsp;</span></p>
</div>
<p class="paragraph">&nbsp;</p>
<p><img src="images/datasets.jpg" alt="datasets" width="507" height="335" /></p>
<p class="paragraph">If you now select <strong>Plot &gt; Channel data (scroll)</strong> and scroll ahead to the period starting at 10 seconds (hit the <strong>&gt;&gt;</strong> button twice), you will now see that the event code numbers that you saw before have been replaced by the event labels.  </p>
<p><img src="images/eeg3.jpg" alt="eeg3" width="653" height="445" /></p>
<p class="paragraph">The standard EEGLAB routine only provides room for about 4 characters, but we have provided a slightly modified version that shows 12 characters for the event labels (see the installation instructions in the ERPLAB User's Manual for instructions on installing this modified plotting function).  This still isn't quite enough, so some of the labels are truncated.  You can modify the number of characters shown in the modified plotting function by selecting <strong>Settings &gt; Events &gt; Number of characters for event labels</strong> from within the plotting window (not from the main EEGLAB window).  If you enter a width of 20 characters, the plot will look like this:</p>
<p><img src="images/eeg4.jpg" alt="eeg4" width="653" height="445" /></p>
<p class="paragraph">Scroll through the data for a while (and play with the plotting routine if you haven't used it before).  You might want to change <strong>Settings &gt; Time range to display</strong> to 30 seconds (within the plotting window).  Eventually (around 120 seconds) you will see a period with no event codes and lots of artifacts.  This is a short rest break about ¼ of the way through the trial block.  You'll see another period like this at 255 seconds and 390 seconds.  The trial block ended at approximately 525 seconds and the file ended at 535 seconds.  You will see a <strong>boundary</strong> event label at this point, which is where the second trial block was appended after the first trial block.  </p>
<p class="paragraph">If you keep going past the <strong>boundary</strong> event, you will start to see some numeric event codes.  In this simplified example of creating an EventList, we assigned labels only to the event codes for the stimuli that were used in the first block of trials (along with the responses for the entire session).  You don't need to assign labels for all of your event codes (or even any of them).  However, having the labels makes it much easier to link the signals that you see in the EEG to specific types of events (especially in experiments with dozens of different event codes).</p>
<p class="paragraph">If you're interested, you can take a look at the text version of the EventList that you created.  Simply open this file with your favorite text editor (such as the Matlab editor).  For details on the contents and format of this file, see the ERPLAB User's Manual.  Later on we will show how you can edit this file and import it back into your EEG data.</p>
<p>&nbsp;</p>
<table width="100%" border="0">
  <tr>
    <td><a href="Background.html">&lt;&lt;Background Concepts</a></td>
    <td><a href="index.html">Table of Contents</a></td>
    <td><a href="Bin_Epoch.html">Create Bin-Based Epochs&gt;&gt;</a></td>
  </tr>
</table>
</body>
</html>
